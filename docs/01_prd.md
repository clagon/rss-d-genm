# **製品要求仕様書：RSSフィードアプリ**

## **1\. 概要**

本ドキュメントは、RSSフィードを取得し、指定されたDiscordチャンネルに自動投稿するシステムと、そのフィードを管理するためのWebアプリケーションに関する製品要求仕様を定義するものです。  
このシステムは、GitHub Actionsを利用した定期実行バッチと、Nuxt.jsで構築された管理用Webアプリの2つの主要コンポーネントで構成されます。

## **2\. 背景と目的**

### **2.1. 背景**

チームやコミュニティにおいて、特定のWebサイトやブログの更新情報を手動で共有するには手間がかかり、共有漏れが発生する可能性があります。特に、複数の情報源を追跡する必要がある場合、その負担は増大します。

### **2.2. 目的**

* **情報共有の自動化と効率化:** RSSフィードを活用し、最新情報を自動で集約し、関連するDiscordチャンネルへ即座に共有することで、手作業による情報伝達の手間を削減する。  
* **情報の一元管理:** 複数のRSSフィードをWebアプリケーション上で一元的に管理し、追加、編集、削除を容易にする。  
* **柔軟な通知:** タグ機能を用いることで、情報の種類に応じて通知先のDiscordチャンネルを柔軟に振り分け、必要な情報が必要なメンバーに届くようにする。  
* **セキュアなアクセス:** Discord SSOを利用し、特定のDiscordサーバーに参加しているメンバーのみが管理アプリにアクセスできるようにすることで、セキュリティを確保する。

## **3\. ユーザーペルソナと権限**

本システムには2種類のユーザーロールが存在します。

| ユーザーロール | 説明 |
| :---- | :---- |
| **管理者 (Admin)** | システムの全機能にアクセス可能。RSSフィード、タグ、ユーザー権限の管理を行う。 |
| **一般ユーザー (User)** | 登録されているRSSフィードの一覧を閲覧することのみが可能。 |

## **4\. 機能要件**

### **4.1. RSS to Discord 自動投稿機能 (GitHub Actions)**

* **定期実行:** GitHub Actionsのcronジョブを利用し、定期的に（例: 1時間に1回）RSSフィードの更新をチェックする。  
* **フィード取得:** データベースに登録されているすべての有効なRSSフィードURLから最新の情報を取得する。  
* **差分チェック:** 前回取得したフィードとの差分を比較し、新規投稿のみを通知対象とする。これにより、重複投稿を防ぐ。  
* **Discordへの投稿:**  
  * 新規投稿があった場合、そのフィードに紐づけられたタグを元に、対応するDiscordチャンネルへ通知を送信する。  
  * 投稿メッセージのフォーマットは、記事のタイトル、概要、リンクを含む見やすい形式とする。  
  * 投稿にはDiscordのHTTP API（Webhook）を使用する。  
* **エラーハンドリング:** RSSフィードの取得失敗やAPIリクエストエラーが発生した際に、ログに記録する。

### **4.2. RSSフィード管理Webアプリ (Nuxt.js)**

#### **4.2.1. 認証と認可**

* **ログイン:** DiscordのSSO（Single Sign-On）を利用してログインを行う。  
* **アクセス制御:** ログイン時に、指定されたDiscordサーバーに参加しているメンバーであることを検証する。サーバーに参加していないユーザーはアクセスを拒否する。  
* **権限管理:** ログインしたユーザーが「管理者」か「一般ユーザー」かを判定し、権限に応じた機能へのアクセスを制御する。

#### **4.2.2. データモデル**

* **フィード (Feed):** 以下の情報を持つ。  
  * id: 一意の識別子  
  * name: フィードの名前（例: 「Google AI Blog」）  
  * url: RSSフィードのURL  
  * tags: 関連付けられたタグのリスト  
  * enabled: 有効/無効フラグ  
* **タグ (Tag):** 以下の情報を持つ。  
  * id: 一意の識別子  
  * name: タグ名（例: 「技術」、「デザイン」）  
  * discord\_channel\_id: 投稿先のDiscordチャンネルID  
  * discord\_webhook\_url: 投稿に使用するDiscord Webhook URL

#### **4.2.3. 画面と機能**

**A. 一般ユーザー向け機能**

* **フィード一覧画面:**  
  * 登録されているすべてのRSSフィードを一覧で表示する（名前、URL、関連タグ）。  
  * タグによる絞り込み検索が可能。

**B. 管理者向け機能**

* **一般ユーザーの全機能**  
* **フィード管理機能 (CRUD):**  
  * **一覧表示:** フィード一覧に加え、編集・削除ボタンを表示する。  
  * **新規登録:** フィードの名前、URL、関連付けるタグを選択して新規登録できる。  
  * **編集:** 既存フィードの名前、URL、関連タグを編集できる。  
  * **削除:** 既存フィードを削除できる。  
* **タグ管理機能 (CRUD):**  
  * **一覧表示:** 登録されているすべてのタグを一覧表示する（タグ名、関連付けられたDiscordチャンネルID）。  
  * **新規登録:** タグ名と、通知先となるDiscordチャンネルID/Webhook URLを登録できる。  
  * **編集:** 既存タグの名前、DiscordチャンネルID/Webhook URLを編集できる。  
  * **削除:** 既存タグを削除できる。

## **5\. 非機能要件**

* **セキュリティ:**  
  * DiscordのWebhook URLやOAuthクライアントシークレットなどの機密情報は、GitHub SecretsやVercel/Netlifyの環境変数など、安全な場所に保管する。  
  * データベースへのアクセス情報も同様に安全に管理する。  
* **パフォーマンス:**  
  * Webアプリケーションは、多数のフィードが登録された場合でも快適に操作できるよう、適切なページネーションや遅延読み込みを実装する。  
* **可用性:**  
  * GitHub Actionsは安定して動作するが、万が一の実行失敗に備え、ログ監視や通知の仕組みを検討する。

## **6\. 使用技術**

| カテゴリ | 技術 | 目的 |
| :---- | :---- | :---- |
| **RSS投稿バッチ** | GitHub Actions | 定期実行 (cron) |
|  | Python | RSSフィードの取得・解析、Discord APIへのリクエスト |
| **管理Webアプリ** | Nuxt.js | フロントエンドアプリケーションの構築 |
| **認証** | Discord SSO | ユーザー認証とサーバー参加状況の確認 |
| **データベース** | (未定) | Firestore, Supabase, PlanetScaleなどのマネージドDBを推奨 |
| **ホスティング** | (未定) | Vercel, Netlifyなどを推奨 |

## **7\. 将来の展望**

* **通知先の拡張:** Discord以外のプラットフォーム（Slack, Microsoft Teamsなど）への通知機能を追加する。  
* **高度なフィルタリング:** キーワードによるフィルタリング機能を追加し、特定のキーワードを含む記事のみを通知できるようにする。  
* **分析機能:** 各フィードの投稿頻度やクリック率などを分析するダッシュボード機能を追加する。  
* **ユーザー管理機能:** 管理者がWebアプリ上で他のユーザーに管理者権限を付与・剥奪できる機能を追加する。